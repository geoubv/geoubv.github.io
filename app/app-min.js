var featureList,uni_veSearch=[],comunas_venSearch=[],aldeas_guaSearch=[];$(window).resize(function(){sizeLayerControl()}),$(document).on("click",".feature-row",function(e){$(document).off("mouseout",".feature-row",clearHighlight),sidebarClick(parseInt($(this).attr("id"),10))}),$(document).on("mouseover",".feature-row",function(e){highlight.clearLayers().addLayer(L.circleMarker([$(this).attr("lat"),$(this).attr("lng")],highlightStyle))}),$(document).on("mouseout",".feature-row",clearHighlight),$("#about-btn").click(function(){return $("#aboutModal").modal("show"),$(".navbar-collapse.in").collapse("hide"),!1}),$("#legend-btn").click(function(){return $("#legendModal").modal("show"),$(".navbar-collapse.in").collapse("hide"),!1}),$("#login-btn").click(function(){return $("#loginModal").modal("show"),$(".navbar-collapse.in").collapse("hide"),!1}),$("#list-btn").click(function(){return $("#sidebar").toggle(),map.invalidateSize(),!1}),$("#nav-btn").click(function(){return $(".navbar-collapse").collapse("toggle"),!1}),$("#sidebar-toggle-btn").click(function(){return $("#sidebar").toggle(),map.invalidateSize(),!1}),$("#sidebar-hide-btn").click(function(){$("#sidebar").hide(),map.invalidateSize()}),$("#sidebar").hide();var markerClusters=new L.MarkerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,disableClusteringAtZoom:14});function sizeLayerControl(){$(".leaflet-control-layers").css("max-height",$("#map").height()-50)}function clearHighlight(){highlight.clearLayers()}function sidebarClick(e){var a=markerClusters.getLayer(e);map.setView([a.getLatLng().lat,a.getLatLng().lng],17),a.fire("click"),document.body.clientWidth<=767&&($("#sidebar").hide(),map.invalidateSize())}var edifubv=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:L.icon({iconUrl:"lib/images/ubv.png",iconSize:[32,32],iconAnchor:[12,28],popupAnchor:[0,-25]}),title:e.properties.EDO+" "+e.properties.TIPO,riseOnHover:!0})},onEachFeature:function(a,e){if(a.properties){var r='<table class="table table-striped table-bordered table-condensed"><tr><th>Estado</th><td>'+a.properties.EDO+"</td></tr><tr><th>Tipo</th><td>"+a.properties.TIPO+"</td></tr><tr><th>Direccion</th><td>"+a.properties.INFO+'</td></tr><tr><th>Imagen</th><td><IMG id="pic" align="center" height="200px" width="300px" src="data/imagenes/sedesubv/'+a.properties.ID+'.jpeg"></td></tr></table>';e.on({click:function(e){$("#feature-title").html("Edificio UBV "+a.properties.TIPO),$("#feature-info").html(r),$("#featureModal").modal("show"),highlight.clearLayers().addLayer(L.circleMarker([a.geometry.coordinates[1],a.geometry.coordinates[0]],highlightStyle))}})}}});$.getJSON("data/geojson/edifubv.geojson",function(e){edifubv.addData(e)});var uni_veLayer=L.geoJson(null),uni_ves=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:L.icon({iconUrl:"lib/images/uni_ve.png",iconSize:[22,22],iconAnchor:[12,28],popupAnchor:[0,-25]}),title:e.properties.Name,riseOnHover:!0})},onEachFeature:function(a,e){if(a.properties){var r="<table class='table table-striped table-bordered table-condensed'><tr><th>Nombre</th><td>"+a.properties.Name+"</td></tr><tr><th>Tipo</th><td>"+a.properties.TIPO+"</td></tr><tr><th>Direccion</th><td>"+a.properties.DIRECCION+"</td></tr><tr><th>Sitio Web</th><td><a class='url-break' href='http://www.google.com/search?ie=UTF-8&oe=UTF-8&sourceid=navclient&gfns=1&q="+a.properties.Name+"' target='_blank'>"+a.properties.Name+"</a></td></tr><table>";e.on({click:function(e){$("#feature-title").html(a.properties.Name),$("#feature-info").html(r),$("#featureModal").modal("show"),highlight.clearLayers().addLayer(L.circleMarker([a.geometry.coordinates[1],a.geometry.coordinates[0]],highlightStyle))}}),$("#feature-list tbody").append('<tr class="feature-row" id="'+L.stamp(e)+'" lat="'+e.getLatLng().lat+'" lng="'+e.getLatLng().lng+'"><td style="vertical-align: middle;"><img width="16" height="18" src="lib/images/uni_ve.png"></td><td class="feature-name">'+e.feature.properties.Name+'</td><td style="vertical-align: middle;"><i class="fa fa-chevron-right pull-right"></i></td></tr>'),uni_veSearch.push({name:e.feature.properties.Name,address:e.feature.properties.TIPO,source:"uni_ves",id:L.stamp(e),lat:e.feature.geometry.coordinates[1],lng:e.feature.geometry.coordinates[0]})}}});$.getJSON("data/geojson/uni_ve.geojson",function(e){uni_ves.addData(e)});var comunas_venLayer=L.geoJson(null),comunas_vens=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:L.icon({iconUrl:"lib/images/comunas_ven.png",iconSize:[22,22],iconAnchor:[12,28],popupAnchor:[0,-25]}),title:e.properties.Nombre,riseOnHover:!0})},onEachFeature:function(a,e){if(a.properties){var r="<table class='table table-striped table-bordered table-condensed'><tr><th>Codigo de Registro</th><td>"+a.properties.Cod_reg+"</td></tr><tr><th>Estado</th><td>"+a.properties.Estado+"</td></tr><tr><th>Municipio</th><td>"+a.properties.Municipio+"</td></tr><tr><th>Parroquia</th><td>"+a.properties.Parroquia+"</td></tr><tr><th>Nombre de la Comuna</th><td>"+a.properties.Nombre+"</td></tr><tr><th>Tipo</th><td>"+a.properties.Tipo+"</td></tr><tr><th>Fecha de Registro</th><td>"+a.properties.Fecha_reg+"</td></tr><tr><th>Consejos Comunales</th><td>"+a.properties.Num_cc+"</td></tr><tr><th>Familias</th><td>"+a.properties.familias+"</td></tr><tr><th>Sitio Web</th><td><a class='url-break' href='http://www.google.com/search?ie=UTF-8&oe=UTF-8&sourceid=navclient&gfns=1&q=Comuna "+a.properties.Nombre+"' target='_blank'>"+a.properties.URL+"</a></td></tr><table>";e.on({click:function(e){$("#feature-title").html(a.properties.Nombre),$("#feature-info").html(r),$("#featureModal").modal("show"),highlight.clearLayers().addLayer(L.circleMarker([a.geometry.coordinates[1],a.geometry.coordinates[0]],highlightStyle))}}),$("#feature-list tbody").append('<tr class="feature-row" id="'+L.stamp(e)+'" lat="'+e.getLatLng().lat+'" lng="'+e.getLatLng().lng+'"><td style="vertical-align: middle;"><img width="16" height="18" src="lib/images/comunas_ven.png"></td><td class="feature-name">'+e.feature.properties.Nombre+'</td><td style="vertical-align: middle;"><i class="fa fa-chevron-right pull-right"></i></td></tr>'),comunas_venSearch.push({name:e.feature.properties.Nombre,address:e.feature.properties.Tipo,source:"comunas_vens",id:L.stamp(e),lat:e.feature.geometry.coordinates[1],lng:e.feature.geometry.coordinates[0]})}}});$.getJSON("data/geojson/comunas_ven.geojson",function(e){comunas_vens.addData(e)});var aldeas_guaLayer=L.geoJson(null),aldeas_gua=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:L.icon({iconUrl:"lib/images/aldeas_gua.png",iconSize:[22,22],iconAnchor:[12,28],popupAnchor:[0,-25]}),title:e.properties.Name,riseOnHover:!0})},onEachFeature:function(a,e){if(a.properties){var r="<table class='table table-striped table-bordered table-condensed'><tr><th>Nombre</th><td>"+a.properties.Name+"</td></tr><tr><th>Direccion</th><td>"+a.properties.DIRECCION+"</td></tr><tr><th>Contacto</th><td><a class='url-break' href='http://www.google.com/search?ie=UTF-8&oe=UTF-8&sourceid=navclient&gfns=1&q=Aldea Universitaria"+a.properties.Name+"' target='_blank'>"+a.properties.web+"</a></td></tr><table>";e.on({click:function(e){$("#feature-title").html("Aldea Universitaria UBV- Mision Sucre - "+a.properties.Name),$("#feature-info").html(r),$("#featureModal").modal("show"),highlight.clearLayers().addLayer(L.circleMarker([a.geometry.coordinates[1],a.geometry.coordinates[0]],highlightStyle))}}),$("#feature-list tbody").append('<tr class="feature-row" id="'+L.stamp(e)+'" lat="'+e.getLatLng().lat+'" lng="'+e.getLatLng().lng+'"><td style="vertical-align: middle;"><img width="16" height="18" src="lib/images/aldeas_gua.png"></td><td class="feature-name">'+e.feature.properties.Name+'</td><td style="vertical-align: middle;"><i class="fa fa-chevron-right pull-right"></i></td></tr>'),aldeas_guaSearch.push({name:e.feature.properties.Name,source:"aldeas_gua",id:L.stamp(e),lat:e.feature.geometry.coordinates[1],lng:e.feature.geometry.coordinates[0]})}}});function syncSidebar(){$("#feature-list tbody").empty(),uni_ves.eachLayer(function(e){map.hasLayer(uni_veLayer)&&map.getBounds().contains(e.getLatLng())&&$("#feature-list tbody").append('<tr class="feature-row" id="'+L.stamp(e)+'" lat="'+e.getLatLng().lat+'" lng="'+e.getLatLng().lng+'"><td style="vertical-align: middle;"><img width="16" height="18" src="lib/images/uni_ve.png"></td><td class="feature-name">'+e.feature.properties.Name+'</td><td style="vertical-align: middle;"><i class="fa fa-chevron-right pull-right"></i></td></tr>')}),comunas_vens.eachLayer(function(e){map.hasLayer(comunas_venLayer)&&map.getBounds().contains(e.getLatLng())&&$("#feature-list tbody").append('<tr class="feature-row" id="'+L.stamp(e)+'" lat="'+e.getLatLng().lat+'" lng="'+e.getLatLng().lng+'"><td style="vertical-align: middle;"><img width="16" height="18" src="lib/images/comunas_ven.png"></td><td class="feature-name">'+e.feature.properties.Nombre+'</td><td style="vertical-align: middle;"><i class="fa fa-chevron-right pull-right"></i></td></tr>')}),aldeas_gua.eachLayer(function(e){map.hasLayer(aldeas_guaLayer)&&map.getBounds().contains(e.getLatLng())&&$("#feature-list tbody").append('<tr class="feature-row" id="'+L.stamp(e)+'" lat="'+e.getLatLng().lat+'" lng="'+e.getLatLng().lng+'"><td style="vertical-align: middle;"><img width="16" height="18" src="lib/images/aldeas_gua.png"></td><td class="feature-name">'+e.feature.properties.Name+'</td><td style="vertical-align: middle;"><i class="fa fa-chevron-right pull-right"></i></td></tr>')}),(featureList=new List("features",{valueNames:["feature-name"]})).sort("feature-name",{order:"asc"})}$.getJSON("data/geojson/aldeas_gua.geojson",function(e){aldeas_gua.addData(e)});var map,attrib=" Universidad Bolivariana de Venezuela",osm=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:attrib+"|<a href='http://www.openstreetmap.org/#map=2/23.9/-6.0&layers=C'>Mapa OpenStreet</a>"}),topo=L.tileLayer("http://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png",{attribution:attrib+"|<a href='http://thunderforest.com/'>Maps for Apps</a>"}),satlabels=L.layerGroup([L.esri.basemapLayer("Imagery"),L.esri.basemapLayer("ImageryLabels")]),highlight=L.geoJson(null),highlightStyle={stroke:!1,fillColor:"#00FFFF",fillOpacity:.7,radius:10},boundsgua=[[9.66357,-67.4711],[10.6496,-65.4294]],boundsajs=[[11.18,-61.847],[10.0321,-64.5289]],boundsmar=[[11.8512,-70.0423],[8.36825,-73.3795]],boundscca=[[9.3282,-69.6126],[6.93435,-72.4898]],boundsjfr=[[10.584,-64.7769],[7.68517,-68.4878]],boundsjch=[[12.198,-68.2198],[9.39001,-70.9758]],boundsjua=[[10.3152,-59.8021],[7.75543,-65.7241]],boundsker=[[8.95018,-60.246],[3.5258,-65.507]],boundsmai=[[9.97539,-67.752],[7.3234,-71.0458]],boundsroa=[[8.69744,-63.3557],[.644106,-70.3733]],boundsegr=[[.644045387225,-73.3793879998],[12.1979113972,-58.145981]];(map=L.map("map",{crs:L.CRS.EPSG3857,center:[7.406,-65.984],maxZoom:18,minZoom:3,zoom:5,layers:[osm,markerClusters],attributionControl:!0,measureControl:!0,zoomControl:!0})).fitBounds(boundsegr);var overlayeregr=new L.ImageOverlay("data/raster/egr.png",boundsegr,{opacity:.5}),overlayerlim=new L.ImageOverlay("data/raster/lim.png",boundsegr,{opacity:.7}).addTo(map),overlayergua=new L.ImageOverlay("data/raster/gua.png",boundsgua,{opacity:.5}),overlayerajs=new L.ImageOverlay("data/raster/ajs.png",boundsajs,{opacity:.5}),overlayermar=new L.ImageOverlay("data/raster/mar.png",boundsmar,{opacity:.5}),overlayercca=new L.ImageOverlay("data/raster/cca.png",boundscca,{opacity:.5}),overlayerjfr=new L.ImageOverlay("data/raster/jfr.png",boundsjfr,{opacity:.5}),overlayerjch=new L.ImageOverlay("data/raster/jch.png",boundsjch,{opacity:.5}),overlayerjua=new L.ImageOverlay("data/raster/jua.png",boundsjua,{opacity:.5}),overlayerker=new L.ImageOverlay("data/raster/ker.png",boundsker,{opacity:.5}),overlayermai=new L.ImageOverlay("data/raster/mai.png",boundsmai,{opacity:.6}),overlayerroa=new L.ImageOverlay("data/raster/roa.png",boundsroa,{opacity:.6});L.control.scale({options:{position:"bottomright",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!0}}).addTo(map),map.on("startfollowing",function(){map.on("dragstart",lc._stopFollowing,lc)}).on("stopfollowing",function(){map.off("dragstart",lc._stopFollowing,lc)}),L.control.searchControl().addTo(map);var drawnItems=new L.FeatureGroup,drawControl=new L.Control.Draw({draw:{position:"topleft",polygon:{title:"Dibuja el poligono",allowIntersection:!1,drawError:{color:"#b00b00",timeout:1e3},shapeOptions:{color:"#0009FF"},showArea:!0},polyline:{metric:!0},circle:{shapeOptions:{color:"#29CB00"}}},edit:{featureGroup:drawnItems}});if(map.addLayer(drawnItems),map.addControl(drawControl),map.on("draw:created",function(e){var a=e.layerType,r=e.layer;if("marker"===a){var t=r.getLatLng().lat+" "+r.getLatLng().lng;r.bindPopup('<b>Latitud-Longitud:</b><br><input type="text" style="height:30px"  id="urlcopy" type="text" value="'+t+'"/><br><a href="http://www.openstreetmap.org/search?query='+t+'">      Ver en OSM</a>')}drawnItems.addLayer(r)}),map.on("overlayadd",function(e){e.layer===uni_veLayer&&(markerClusters.addLayer(uni_ves),syncSidebar()),e.layer===comunas_venLayer&&(markerClusters.addLayer(comunas_vens),syncSidebar()),e.layer===aldeas_guaLayer&&(markerClusters.addLayer(aldeas_gua),syncSidebar())}),map.on("overlayremove",function(e){e.layer===uni_veLayer&&(markerClusters.removeLayer(uni_ves),syncSidebar()),e.layer===comunas_venLayer&&(markerClusters.removeLayer(comunas_vens),syncSidebar()),e.layer===aldeas_guaLayer&&(markerClusters.removeLayer(aldeas_gua),syncSidebar())}),map.on("moveend",function(e){syncSidebar()}),map.on("click",function(e){highlight.clearLayers()}),document.body.clientWidth<=767)var isCollapsed=!0;else isCollapsed=!1;map.on("measurefinish",function(e){e.layerType,e.layer});var bases=[{groupName:"Mapas Base",expanded:!1,layers:{Callejero:osm,Satelital:satlabels}}],capas=[{groupName:"Ejes Regionales UBV",expanded:!1,layers:{"EGR Nacional":overlayeregr}},{groupName:"Ejes Municipales UBV",expanded:!1,layers:{"EGR Cacique Guaicaipuro":overlayergua,"EGR Antonio Jose De Sucre":overlayerajs,"EGR Cacique Mara":overlayermar,"EGR Cipriano Castro":overlayercca,"EGR Jose Felix Ribas":overlayerjfr,"EGR Jose Leonardo Chirinos":overlayerjch,"EGR Juana La Avanzadora":overlayerjua,"EGR Kerepacupai Vena":overlayerker,"EGR Guerrillero Maisanta":overlayermai,"EGR Rios Orinoco-Apure":overlayerroa}},{groupName:"Puntos Socioeducativos",expanded:!0,layers:{"<img src='lib/images/ubv.png' width='24' height='24'>&nbsp;Universidad Bolivariana":edifubv,"<img src='lib/images/uni_ve.png' width='22' height='22'>&nbsp;Universidades Nacionales":uni_veLayer,"<img src='lib/images/comunas_ven.png' width='24' height='24'>&nbsp;Comunas Constituidas":comunas_venLayer,"<img src='lib/images/aldeas_gua.png' width='18' height='18'>&nbsp;Aldeas Guaicaipuro":aldeas_guaLayer}}],options={container_width:"100%",group_maxHeight:"100%",collapsed:!0,exclusive:!1},controlx=L.Control.styledLayerControl(bases,capas,options).addTo(map);map.on("zoomend",function(){7<=map.getZoom()&&1==map.hasLayer(overlayerlim)&&map.removeLayer(overlayerlim),map.getZoom()<=7&&0==map.hasLayer(overlayerlim)&&map.addLayer(overlayerlim)}),edifubv.addTo(map),$("#searchbox").click(function(){$(this).select()}),$("#searchbox").keypress(function(e){13==e.which&&e.preventDefault()}),$("#featureModal").on("hidden.bs.modal",function(e){$(document).on("mouseout",".feature-row",clearHighlight)});var leyenda_egr=L.control({position:"bottomleft"});leyenda_egr.onAdd=function(e){var a=L.DomUtil.create("div","info-legend");return a.innerHTML='<img height="100%" width="100%" src="data/imagenes/leyendas/leyegr.png"></img>',a};var leyenda_gua=L.control({position:"bottomright"});leyenda_gua.onAdd=function(e){var a=L.DomUtil.create("div","info-legend");return a.innerHTML='<img height="100%" width="100%" src="data/imagenes/leyendas/leygua.png"></img>',a};var leyenda_ajs=L.control({position:"bottomright"});leyenda_ajs.onAdd=function(e){var a=L.DomUtil.create("div","info-legend");return a.innerHTML='<img height="100%" width="100%" src="data/imagenes/leyendas/leyajs.png"></img>',a};var leyenda_mar=L.control({position:"bottomright"});leyenda_mar.onAdd=function(e){var a=L.DomUtil.create("div","info-legend");return a.innerHTML='<img height="100%" width="100%" src="data/imagenes/leyendas/leymar.png"></img>',a};var leyenda_cca=L.control({position:"bottomright"});leyenda_cca.onAdd=function(e){var a=L.DomUtil.create("div","info-legend");return a.innerHTML='<img height="100%" width="100%" src="data/imagenes/leyendas/leycca.png"></img>',a};var leyenda_jfr=L.control({position:"bottomright"});leyenda_jfr.onAdd=function(e){var a=L.DomUtil.create("div","info-legend");return a.innerHTML='<img height="100%" width="100%" src="data/imagenes/leyendas/leyjfr.png"></img>',a};var leyenda_jch=L.control({position:"bottomright"});leyenda_jch.onAdd=function(e){var a=L.DomUtil.create("div","info-legend");return a.innerHTML='<img height="100%" width="100%" src="data/imagenes/leyendas/leyjch.png"></img>',a};var leyenda_jua=L.control({position:"bottomright"});leyenda_jua.onAdd=function(e){var a=L.DomUtil.create("div","info-legend");return a.innerHTML='<img height="100%" width="100%" src="data/imagenes/leyendas/leyjua.png"></img>',a};var leyenda_ker=L.control({position:"bottomright"});leyenda_ker.onAdd=function(e){var a=L.DomUtil.create("div","info-legend");return a.innerHTML='<img height="100%" width="100%" src="data/imagenes/leyendas/leyker.png"></img>',a};var leyenda_mai=L.control({position:"bottomright"});leyenda_mai.onAdd=function(e){var a=L.DomUtil.create("div","info-legend");return a.innerHTML='<img height="100%" width="100%" src="data/imagenes/leyendas/leymai.png"></img>',a};var leyenda_roa=L.control({position:"bottomright"});leyenda_roa.onAdd=function(e){var a=L.DomUtil.create("div","info-legend");return a.innerHTML='<img height="100%" width="100%" src="data/imagenes/leyendas/leyroa.png"></img>',a},map.on("overlayadd",function(e){switch(e.name){case"EGR Nacional":leyenda_egr.addTo(map);break;case"EGR Cacique Guaicaipuro":leyenda_gua.addTo(map);break;case"EGR Antonio Jose De Sucre":leyenda_ajs.addTo(map);break;case"EGR Cacique Mara":leyenda_mar.addTo(map);break;case"EGR Cipriano Castro":leyenda_cca.addTo(map);break;case"EGR Jose Felix Ribas":leyenda_jfr.addTo(map);break;case"EGR Jose Leonardo Chirinos":leyenda_jch.addTo(map);break;case"EGR Juana La Avanzadora":leyenda_jua.addTo(map);break;case"EGR Kerepacupai Vena":leyenda_ker.addTo(map);break;case"EGR Guerrillero Maisanta":leyenda_mai.addTo(map);break;case"EGR Rios Orinoco-Apure":leyenda_roa.addTo(map)}}),map.on("overlayremove",function(e){switch(e.name){case"EGR Nacional":map.removeControl(leyenda_egr);break;case"EGR Cacique Guaicaipuro":map.removeControl(leyenda_gua);break;case"EGR Antonio Jose De Sucre":map.removeControl(leyenda_ajs);break;case"EGR Cacique Mara":map.removeControl(leyenda_mar);break;case"EGR Cipriano Castro":map.removeControl(leyenda_cca);break;case"EGR Jose Felix Ribas":map.removeControl(leyenda_jfr);break;case"EGR Jose Leonardo Chirinos":map.removeControl(leyenda_jch);break;case"EGR Juana La Avanzadora":map.removeControl(leyenda_jua);break;case"EGR Kerepacupai Vena":map.removeControl(leyenda_ker);break;case"EGR Guerrillero Maisanta":map.removeControl(leyenda_mai);break;case"EGR Rios Orinoco-Apure":map.removeControl(leyenda_roa)}}),$(document).one("ajaxStop",function(){$("#loading").hide(),sizeLayerControl();var e=new Bloodhound({name:"comunas_vens",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:comunas_venSearch,limit:10}),a=new Bloodhound({name:"uni_ves",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:uni_veSearch,limit:10}),r=new Bloodhound({name:"aldeas_gua",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:aldeas_guaSearch,limit:10});r.initialize(),e.initialize(),a.initialize(),$("#searchbox").typeahead({minLength:3,highlight:!0,hint:!0},{name:"uni_ves",displayKey:"name",source:a.ttAdapter(),templates:{header:"<h4 class='typeahead-header'><img src='lib/images/uni_ve.png' width='24' height='28'>&nbsp;uni_ves</h4>",suggestion:Handlebars.compile(["{{name}}<br>&nbsp;<small>{{address}}</small>"].join(""))}},{name:"comunas_vens",displayKey:"name",source:e.ttAdapter(),templates:{header:"<h4 class='typeahead-header'><img src='lib/images/comunas_ven.png' width='24' height='28'>&nbsp;comunas_vens</h4>",suggestion:Handlebars.compile(["{{name}}<br>&nbsp;<small>{{address}}</small>"].join(""))}},{name:"aldeas_gua",displayKey:"name",source:r.ttAdapter(),templates:{header:"<h4 class='typeahead-header'><img src='lib/images/aldeas_gua.png' width='24' height='28'>&nbsp;aldeas_gua</h4>",suggestion:Handlebars.compile(["{{name}}<br>&nbsp;<small>{{address}}</small>"].join(""))}}).on("typeahead:selected",function(e,a){"uni_ves"===a.source&&(map.hasLayer(uni_veLayer)||map.addLayer(uni_veLayer),map.setView([a.lat,a.lng],17),map._layers[a.id]&&map._layers[a.id].fire("click")),"comunas_vens"===a.source&&(map.hasLayer(comunas_venLayer)||map.addLayer(comunas_venLayer),map.setView([a.lat,a.lng],17),map._layers[a.id]&&map._layers[a.id].fire("click")),"aldeas_gua"===a.source&&(map.hasLayer(aldeas_guaLayer)||map.addLayer(aldeas_guaLayer),map.setView([a.lat,a.lng],17),map._layers[a.id]&&map._layers[a.id].fire("click")),50<$(".navbar-collapse").height()&&$(".navbar-collapse").collapse("hide")}).on("typeahead:opened",function(){$(".navbar-collapse.in").css("max-height",$(document).height()-$(".navbar-header").height()),$(".navbar-collapse.in").css("height",$(document).height()-$(".navbar-header").height())}).on("typeahead:closed",function(){$(".navbar-collapse.in").css("max-height",""),$(".navbar-collapse.in").css("height","")}),$(".twitter-typeahead").css("position","static"),$(".twitter-typeahead").css("display","block")});var container=$(".leaflet-control-layers")[0];L.Browser.touch?L.DomEvent.disableClickPropagation(container):L.DomEvent.disableClickPropagation(container).disableScrollPropagation(container);